@function fb-gradient-glossy($color, $state: false){
  $adjustments: 45% -25% 0%, 13% -25% 50%, -8% 50%, 7% -14% 100%;
  @if $state == hover {
    $adjustments: 35% -25% 0%, 8% -25% 50%, -8% 50%, 0% -14% 100%;
  } @else if $state == active {
    $adjustments: 25% -28% 0%, -8% -28% 50%, -30% 50%, -8% -10% 100%;
  }
  @return fb-gradient($color, $adjustments);
}

@mixin fb-theme-glossy($color: false, $hover: true, $active: true, $border: false, $radius: false, $image: false, $disable: false){
  $color: if($color, $color, $fb-default-color);
  @include box-shadow(rgba(#fff, .1) 0 0 1px 1px inset, rgba(#fff, .4) 0 1px inset);
  @include border-radius(if($radius, $radius, .3em));
  @include fb-borders($color, $border);
  @include fb-bg(fb-gradient-glossy($color), $image);
  background-color: scale-color($color, $lightness: 15%, $saturation: can-saturate($color, 20%, 0%));
  color: fb-text-color($color, #000, #fff);
  @include fb-text-shadow($color);
  @if not $disable {
    @if $hover { &:hover, &:focus {
      $state: if($color == $hover, hover, standard);
      @include fb-bg(fb-gradient-glossy($hover, $state), $image);
      @include fb-borders(darken($hover, 20), $border);
      background-color: scale-color($active, $saturation: can-saturate($active, 20%, 0%));
    }}
    @if $active { &:active {
      $state: if($color == $active, hover, standard);
      @if not $hover or $state == standard { @include fb-bg(fb-gradient-glossy($active, $state), $image); }
      @include box-shadow(scale-color($active, $saturation: can-saturate($active, 10%, 0%), $lightness: -35%) 0 0 .7em .2em inset);
      @include fb-borders(darken($active, 20), $border);
      background-color: scale-color($active, $lightness: -12%, $saturation: can-saturate($active, 20%, 0%));
    }}
  }
}

@function fb-gradient-basic($color, $state: false){
  $adjustments: 20% 0%, 0% 50%, -12% 100%;
  @if $state == hover {
    $adjustments: 12% 0%, -8% 50%, -12% 100%;
  } @else if $state == active {
    $adjustments: -8% 0%, -5% 50%, 2% 100%;
  }
  @return fb-gradient($color, $adjustments);
}

@mixin fb-theme-basic($color: false, $hover: true, $active: true, $border: false, $radius: false, $image: false, $disable: false){
  $color: if($color, $color, $fb-default-color);
  @include box-shadow(rgba(#fff, .15) 0 0 1px 1px inset, rgba(#fff, .2) 0 1px 1px inset);
  @include border-radius(if($radius, $radius, .3em));
  @include fb-borders($color, $border);
  @include fb-bg(fb-gradient-basic($color), $image);
  @include fb-text-shadow($color);
  background-color: scale-color($color, $lightness: 15%, $saturation: can-saturate($color, 20%, 0%));
  color: fb-text-color($color, #000, #fff);
  @if not $disable {
    @if $hover { &:hover, &:focus {
      $state: if($color == $hover, hover, standard);
      @include fb-bg(fb-gradient-basic($hover, $state), $image);
      background-color: scale-color($active, $saturation: can-saturate($active, 20%, 0%));
    }}
    @if $active { &:active {
      $state: if($color == $active, active, standard);
      @include fb-bg(fb-gradient-basic($active, $state), $image);
      @include box-shadow(rgba(scale-color($active, $saturation: can-saturate($active, 15%, 0%), $lightness: if(lightness($active) < 50, -30%, -10%)), .9) 0 0 .5em 0px inset);
      @if fb-text-color($active) == light { color: #eee; }
      background-color: scale-color($active, $lightness: -12%, $saturation: can-saturate($active, 20%, 0%));
    }}
  }
}

@function fb-gradient-mini($color, $state: false){
  $adjustments: 20% 0%, 0% 50%, -20% 100%;
  @if $state == hover {
    $adjustments: 10% 0%, -5% 50%, -30% 100%;
  } @else if $state == active {
    $adjustments: -16% 0%, -8% 50%, -5% 100%;
  }
  @return fb-gradient($color, $adjustments);
}


@mixin fb-theme-mini($color: false, $hover: true, $active: true, $border: false, $radius: false, $image: false, $disable: false){
  $color: if($color, $color, #4191dc);
  @include box-shadow(rgba(#fff, .25) 0 1px 0 0 inset, rgba(#000, .3) 0 1px 2px 0);
  @include border-radius(if($radius, $radius, 1em));
  @include fb-borders(darken($color, 10), $border);
  @include fb-bg(fb-gradient-mini($color), $image);
  @include fb-text-shadow($color);
  font-family: 'lucida grande', lucida, sans-serif;
  background-color: scale-color($color, $lightness: 15%, $saturation: if(saturation($color) > 20, 20%, 0%));
  color: fb-text-color($color, #000, #fff);
  font-size: 11px;
  padding: .2em .9em .3em;
  @if not $disable {
    @if $hover { &:hover, &:focus {
      $state: if($color == $hover, hover, standard);
      @include fb-bg(fb-gradient-mini($hover, $state), $image);
      @include box-shadow(rgba(#fff, .25) 0 1px 0 0 inset);
      background-color: scale-color($active, $saturation: can-saturate($active, 20%, 0%));
    }}
    @if $active { &:active {
      $state: if($color == $active, active, standard);
      $s: can-saturate($color, 45%, 0%);
      $l: -45%;
      @include fb-bg(fb-gradient-mini($color, $state), $image);
      @include fb-borders(darken($active, 20), $border);
      @include box-shadow(scale-color($active, $saturation: $s, $lightness: $l) 0 0 .6em .3em inset);
      background-color: scale-color($active, $lightness: -12%, $saturation: can-saturate($active, 20%, 0%));
    }}
  }
}

@mixin fb-theme-bonbon($color: false, $hover: true, $active: true, $border: false, $radius: false, $image: false, $disable: false, $glossy: false){
  $color: if($color, $color, #bfbfbf);

}
